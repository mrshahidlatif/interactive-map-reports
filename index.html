<!DOCTYPE html>
<meta charset="utf-8">
<html>
<head>
  <link rel="stylesheet" href="style.css">
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="lib/simple-statistics.min.js"></script>
  <script src="lib/mahalanobis.min.js"></script>
  <script src="geo_neighbors.js"></script>
  <script src="regions.js"></script>
  <script src="config.js"></script>

  <script src="vis.js"></script>
  <script src="nlg.js"></script>
  <script src="dictionary.js"></script>

  <title id="pageTitle">iMR</title>
</head>
<body>
    <div id="mySidenav" class="sidenav">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <a class="exampleSwitch" id="example1">USA - Deaths and Storms</a>
        <a class="exampleSwitch" id="example2">Europe - Life expectancy </a>
        <a class="exampleSwitch" id="example3">USA - Accidents</a>
        <a class="exampleSwitch" id="example4">Europe - Birth rate</a>
        <a class="exampleSwitch" id="example5">USA - Per capita income</a>
        <a class="exampleSwitch" id="example6">World - Adolescent birth rate</a>
        <a class="exampleSwitch" id="example7">World - Obesity</a>
    </div>
    <!-- <div class="navbar">
       
    </div> -->
  <div class="header">
      <span id="sideBarBtn" onclick="openNav()">&#9776;</span>
      <div id="logo"> 
          <!-- <img src="logo/logo.png" width="120" height="35" alt="" /> -->
          <embed width="175px" type="image/svg+xml" src="logo/logo.svg" />
      </div>
  </div>
    <div id="reportTitle" class="rowHeader">
           <!-- <h3 align="center", id="reportTitle"></h3> -->
  <!--      <div class="leftcolumnHeader" >
          <h3>Visualization</h3>
       </div>
       <div class="rightcolumnHeader">
          <h3>Narrative</h3>
       </div> -->
    </div>

  <div class="row">
    <div class="leftcolumn">
      <svg id="map"></svg>
    </div>
    <div class="rightcolumn">
        <p id="intro"></p>
        <p id="focusVText"></p>
        <p id="rText"></p>
        <p id="text"></p>
        <p id="strend"></p>
        <h3 id="eod-head"></h3>
        <p id="eod"></p>
    </div>
  </div>
  <div class="footer">
    <ul>
      <li><a href="index.html">ABOUT</a></li>
      <li><a href="https://www.uni-due.de/de/impressum.shtml">IMPRINT</a></li>
      <li><a href="https://www.uni-due.de/de/datenschutz.php">DATA PRIVACY</a></li>
      <li style="float: right;"> <a id="disclaimer">Disclaimer: Text is automatically generated. Errors and omissions are excepted.</a>></li>
    </ul>
  </div>
  <script>
    function openNav() {
      document.getElementById("mySidenav").style.width = "250px";
    }
    function closeNav() {
      document.getElementById("mySidenav").style.width = "0";
    }
    $(document).ready(function(){
        console.log("iMR loaded!");
        
        var config="";
        var regions="";
        var existNeighborsInfo;
        $('body').on('click', '.rID', function() {
           highlightRegion($(this).text());
         })

        $('body').on('click', '.infoIcon', function() {
             isCompareMode = !isCompareMode; 
            $(this).toggleClass("green");
       })
       $('body').on('click', '.exampleSwitch', function(e) {
         $("map").empty();
         loadExample(e.target.id);
       })
  });

  function loadExample(id){
    var data=[];
    // d3.json("config.json", function(d){
    // console.log(id)
    
    //removing contents before loading next example
    $('p').empty();
    $('h3').empty();

    switch (id) {
      case "example1":
        config = e1_config;
        regions = usa_regions;
        existNeighborsInfo = true;
        break;
      case "example2":
        config = e2_config;
        regions = europe_regions;
        existNeighborsInfo = false;
        break;
      case "example3":
        config = e3_config;
        regions = usa_regions;
        existNeighborsInfo = true;
        break;
      case "example4":
        config = e4_config;
        regions = europe_regions;
        existNeighborsInfo = false;
        break;
      case "example5":
        config = e5_config;
        regions = usa_regions;
        existNeighborsInfo = true;
        break;
      case "example6":
        config = e6_config;
        regions = world_regions;
        existNeighborsInfo = false;
        break;
      case "example7":
        config = e7_config;
        regions = world_regions;
        existNeighborsInfo = false;
        break;
    
      default:
        break;
    }
    d3.csv(config.dataFile, function(d){
      data = d;
      generateVis("map", config);
      var facts = analyse(data, config);
      generateNarrative(facts, config); 
    });
    // });
    closeNav();
  }
    
  </script>
</body>

</html> 